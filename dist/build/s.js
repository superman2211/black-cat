"use strict";(()=>{var P=Math,Ct=P.floor,rt=P.ceil,B=P.round,Mt=P.min,pt=P.max,It=P.hypot,it=P.abs,D=P.random,Yn=P.atan2,no=P.PI,Kn=no*2,Tt=Number.MAX_VALUE,Rt=(t,e,o)=>Mt(e,pt(t,o)),ao=(t,e,o)=>t+o*(e-t),q=(t,e)=>ao(t,e,D()),dt=t=>D()<t;function Et(t){return t[B(q(0,t.length-1))]}function xt(t,e){let o=e.reduce((r,i)=>r+i,0),n=D()*o,a=0;for(let r=0;r<t.length;r++)if(a+=e[r],n<a)return t[r];return t[0]}var gt=document,qt="ontouchstart"in window;var ro="canvas",b=t=>t.getContext("2d"),X=()=>gt.createElement(ro),Nt=()=>b(X()),ht=t=>t.canvas;var $t=(t,e)=>ht(t).width=e,Lt=(t,e)=>ht(t).height=e;var F=(t,e,o,n)=>t.drawImage(e,B(o),B(n));var st=()=>performance.now(),Vt=t=>JSON.parse(JSON.stringify(t));async function Xt(t){return new Promise(e=>{setTimeout(e,t)})}var jt=t=>{let e=t>>24&255,o=t>>16&255,n=t>>8&255,a=t&255;return`rgba(${o}, ${n}, ${a}, ${e/255})`},Yt=(t,e,o,n,a,r,i)=>{let c=t.createLinearGradient(e,o,n,a);return c.addColorStop(0,jt(r)),c.addColorStop(1,jt(i)),c};var Jt=(t,e,o,n)=>{let a=X(),r=b(a),i=f[o[0]];a.width=t,a.height=e;let c=rt(t/i.width),s=rt(e/i.height);for(let m=0;m<c;m++)for(let l=0;l<s;l++)i=f[xt(o,n)],r.drawImage(i,m*i.width,l*i.height);return a},Qt=(t,e,o)=>{let n=X(),a=b(n);n.width=t,n.height=e;let r=f[o],i=rt(t/r.width),c=rt(e/r.height);for(let s=0;s<i;s++)for(let m=0;m<c;m++)a.drawImage(r,s*r.width,m*r.height);return n},Zt=(t,e)=>{for(let o=0;o<t.length;o+=3){let n=t[o],a=t[o+1],r=t[o+2],i=f[n];F(e,i,a,r)}},ut=(t,e,o,n,a,r,i)=>{t.fillStyle=Yt(t,e,o,e,o+a,r,i),t.fillRect(e,o,n,a)};var Pt=(t,e)=>{let o=b(t),n=t.width,a=t.height,r=o.getImageData(0,0,n,a),i=r.data,c=0;for(;c<i.length;){let s=i.slice(c,c+4);e(s),i.set(s,c),c+=4}o.putImageData(r,0,0)},yt=t=>{var e=X(),o=b(e);return e.width=t.width,e.height=t.height,o.drawImage(t,0,0),e};var te=(t,e,o)=>{Pt(t,n=>{let a=io(n),r=e.indexOf(a);if(r!=-1){let i=o[r];so(i,n)}})},Kt=new Uint32Array(1),io=t=>{let e=t[0],o=t[1],n=t[2],a=t[3];return Kt[0]=a<<24|e<<16|o<<8|n,Kt[0]},so=(t,e)=>{let o=t>>24&255,n=t>>16&255,a=t>>8&255,r=t&255;e[0]=n,e[1]=a,e[2]=r,e[3]=o};var f=[],Ht={},ct=t=>{let e=f.length;return f.push(t),e},wt=(t,e)=>{let o=`${t}_${e}`;if(!Ht[o]){let n=e>>24&255,a=e>>16&255,r=e>>8&255,i=e&255,c=yt(f[t]);Pt(c,s=>{s[0]=a,s[1]=r,s[2]=i,s[3]&&(s[3]=n)}),Ht[o]=ct(c)}return Ht[o]};var W;(function(t){t.normalize=e=>{let o=t.length(e);o>0&&(e.x/=o,e.y/=o)},t.length=e=>It(e.x,e.y),t.distance=(e,o)=>It(e.x-o.x,e.y-o.y),t.add=(e,o)=>({x:e.x+o.x,y:e.y+o.y}),t.subtract=(e,o)=>({x:e.x-o.x,y:e.y-o.y}),t.scale=(e,o)=>({x:e.x*o,y:e.y*o})})(W||(W={}));var mt=st(),S=0,ee=()=>{let t=mt;mt=st(),S=(mt-t)/1e3};var J=t=>{let e=0;for(let o of t)e+=o.time;return e},bt=(t,e)=>{let o=0,n=J(t);e%=n;for(let a=0;a<t.length;a++){let r=t[a];if(o+=r.time,e<=o)return r.image}return 0},ft=(t,e)=>{let o=J(t);return e>=o};var Q=[],oe={animation:[{image:48,time:.1},{image:49,time:.1},{image:50,time:.1}],offset:{x:16,y:16}},ne={animation:[{image:51,time:.1},{image:52,time:.2},{image:53,time:.2}],offset:{x:8,y:8}},ae={animation:[{image:54,time:.1},{image:55,time:.2},{image:56,time:.2}],offset:{x:8,y:8}},yo=t=>{let e=Q.indexOf(t);e!=-1&&Q.splice(e,1)},re=(t,e)=>{Q.push({animation:t.animation,animationTime:0,sprite:{image:0,x:e.x-t.offset.x,y:e.y-t.offset.y}})},ie=()=>{for(let t of Q){let e=J(t.animation);t.animationTime+=S,t.animationTime>e?yo(t):t.sprite.image=bt(t.animation,t.animationTime)}};var se,M=()=>se,ce=t=>se=t,me=()=>{let t=M(),e=f[t.back.image];-t.camera.x>0&&(t.camera.x=0),-t.camera.x+e.width<_&&(t.camera.x=e.width-_),-t.camera.y>0&&(t.camera.y=0),-t.camera.y+e.height<C&&(t.camera.y=e.height-C)};var x=[],_t=t=>{let e={config:t,state:0,controller:{move:{x:0,y:0},hand:!1,leg:!1,cross:!1},health:t.health,direction:1,position:{x:0,y:0},speed:{x:0,y:0},animationTime:0,sprite:{image:0},shadow:{image:0},damage:0,frame:0};return x.push(e),e},wo=t=>{let e=x.indexOf(t);e!=-1&&x.splice(e,1)},le=()=>{x.splice(0,x.length)},pe=()=>{let t=M();for(let e of x.values())e.position.x=Rt(t.bounds.x,t.bounds.x+t.bounds.w,e.position.x),e.position.y=Rt(t.bounds.y,t.bounds.y+t.bounds.h,e.position.y)},de=()=>{for(let t of x.values())bo(t)},bo=t=>{let e=null,o=t.config,n=o.animations;switch(t.state){case 0:e=n.stand,(t.controller.move.x!=0||t.controller.move.y!=0)&&(t.state=1,t.animationTime=0),fe(t);break;case 1:t.controller.move.x==0&&t.controller.move.y==0?(t.state=0,t.animationTime=0):it(t.controller.move.x)>it(t.controller.move.y)?e=n.walkH:e=n.walkV,W.normalize(t.controller.move),t.position.x+=t.controller.move.x*o.walkSpeed*S,t.position.y+=t.controller.move.y*o.walkSpeed*S,fe(t);break;case 2:e=n.jab,ft(e,t.animationTime)&&(t.controller.hand?t.state=3:t.state=0,t.animationTime=0);break;case 3:e=n.cross,ft(e,t.animationTime)&&(t.controller.hand||(t.state=0,t.animationTime=0));break;case 4:e=n.kick,ft(e,t.animationTime)&&(t.state=0,t.animationTime=0);break;case 5:e=t.animation||n.damage1,ft(e,t.animationTime)&&(t.state=0,t.animationTime=0,t.animation=void 0);break;case 6:e=t.animation||n.dead1,J(e)<=t.animationTime+S&&(wo(t),e=null);break}t.position.x+=t.speed.x*S,t.position.y+=t.speed.y*S,t.speed.x*=.9,t.speed.y*=.9,t.controller.move.x>0?t.direction=1:t.controller.move.x<0&&(t.direction=-1),e&&(t.animationTime+=S,t.sprite.image=bt(e,t.animationTime),t.sprite.flipX=t.direction<0,t.shadow.image=wt(t.sprite.image,1426063360),t.shadow.flipX=t.sprite.flipX),t.damage=0,t.frame!=t.sprite.image&&(t.frame=t.sprite.image,t.damage=o.damages[t.frame]||0)},xe=()=>{for(let t of x){if(t.health<=0||!t.damage)continue;let e=null,o=Tt,n=Tt;for(let a of x)if(!(a.health<=0)&&t.config.mob!=a.config.mob){let r=a.position.x-t.position.x;if(r*t.direction>0){let i=it(r),c=it(t.position.y-a.position.y);i<25&&c<10&&(!e||o>i||n>c)&&(e=a,o=i,n=c)}}if(e){e.health-=t.damage,e.speed.x+=t.direction*t.damage/100*300,t.speed.x+=t.direction*10;let a=t.damage>=20?oe:dt(.5)?ae:ne;re(a,W.add(e.position,{x:q(-3,3),y:q(-14,-18)})),e.health>0?(e.state=5,e.animation!=e.config.animations.knockdown&&(e.animationTime=0),e.animation=Et([e.config.animations.damage1,e.config.animations.damage2,e.config.animations.knockdown])):(e.state=6,e.animation=Et([e.config.animations.dead1,e.config.animations.dead2]),e.animationTime=0)}}},ge=()=>{for(let t of x.values())_o(t)},_o=t=>{let e=t.config;t.sprite.x=t.position.x-e.offset.x,t.sprite.y=t.position.y-e.offset.y;let o=f[t.shadow.image];t.shadow.scaleY=.4,t.shadow.x=t.position.x-e.offset.x+0,t.shadow.y=t.position.y-e.offset.y*t.shadow.scaleY},fe=t=>{t.controller.leg&&(t.state=4,t.animationTime=0),t.controller.hand&&(t.state=2,t.animationTime=0),t.controller.cross&&(t.state=3,t.animationTime=0)};var sn=()=>{let t=[];return t[33]=46,t[35]=0,t[46]=47,t[47]=-1,t.push(10,11,12,13,14,15,16,17,18,19),t[64]=0,t.push(20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45),t},At=sn(),he=t=>{if(!1)throw`symbol not found ${t} char ${String.fromCharCode(t)}`;return At[t]};var h=document.getElementById("c");h.style.imageRendering="pixelated";var d=b(h),_=200,C=200,N={x:0,y:0},ue=()=>{let t=window.innerWidth,e=window.innerHeight,o=Mt(t/_,e/C);h.width=pt(_,t/o),h.height=pt(C,e/o),h.style.width=`${t}px`,h.style.height=`${e}px`,N.x=Ct((h.width-_)/2),N.y=Ct((h.height-C)/2)},ye=()=>{d.clearRect(0,0,h.width,h.height),d.setTransform(1,0,0,1,N.x,N.y);let t=M();d.save(),d.translate(B(-t.camera.x),B(-t.camera.y)),kt(t.back),x.sort((e,o)=>e.position.y-o.position.y),d.shadowBlur=2,d.shadowColor="black";for(let e of x)kt(e.shadow);d.shadowBlur=0;for(let e of x)kt(e.sprite);for(let e of Q)kt(e.sprite);d.restore(),d.fillStyle="black",h.width<h.height?(d.fillRect(0,-N.y,_,N.y),d.fillRect(0,C,_,C)):(d.fillRect(-N.x,0,N.x,_),d.fillRect(_,0,_,C)),cn()},kt=t=>{d.save();let e=f[t.image],o=1,n=0,a=0,r=t.scaleY||1,i=B(t.x||0),c=B(t.y||0);t.flipX&&(o=-1,i+=e.width),d.transform(o,n,a,r,i,c),F(d,e,0,0),d.restore()},cn=()=>{if(!1){let t=(st()-mt).toFixed(),e=(1/S).toFixed();mn(3,3,`FPS ${e} TIME ${t}`,2583691263)}},mn=(t,e,o,n)=>{for(let a=0;a<o.length;a++){let r=o[a].toUpperCase().charCodeAt(0),i=he(r);if(i!==void 0){let c=wt(i,n),s=f[c];s!==void 0&&F(d,s,t+a*8,e)}}};var we=(...t)=>{let e=$.createBufferSource(),o=$.createBuffer(t.length,t[0].length,k);return t.map((n,a)=>o.getChannelData(a).set(n)),e.buffer=o,e.connect($.destination),e.start(),e},fn=(t=1,e=.05,o=220,n=0,a=0,r=.1,i=0,c=1,s=0,m=0,l=0,T=0,g=0,R=0,E=0,A=0,u=0,O=1,U=0,tt=0)=>{let y=2*Math.PI,et=s*=500*y/k**2,ot=(0<E?1:-1)*y/4,Y=o*=(1+2*e*Math.random()-e)*y/k,V=[],v=0,nt=0,p=0,z=1,vt=0,oo=0,G=0,at,K;for(n=99+k*n,U*=k,a*=k,r*=k,u*=k,m*=500*y/k**3,E*=y/k,l*=y/k,T*=k,g=k*g|0,K=n+U+a+r+u|0;p<K;V[p++]=G)++oo%(100*A|0)||(G=i?1<i?2<i?3<i?Math.sin((v%y)**3):Math.max(Math.min(Math.tan(v),1),-1):1-(2*v/y%2+2)%2:1-4*Math.abs(Math.round(v/y)-v/y):Math.sin(v),G=(g?1-tt+tt*Math.sin(2*Math.PI*p/g):1)*(0<G?1:-1)*Math.abs(G)**c*t*ln*(p<n?p/n:p<n+U?1-(p-n)/U*(1-O):p<n+U+a?O:p<K-u?(K-p-u)/r*O:0),G=u?G/2+(u>p?0:(p<K-u?1:(K-p)/u)*V[p-u|0]/2):G),at=(o+=s+=m)*Math.sin(nt*E-ot),v+=at-at*R*(1-1e9*(Math.sin(p)+1)%2),nt+=at-at*R*(1-1e9*(Math.sin(p)**2+1)%2),z&&++z>T&&(o+=l,Y+=l,z=0),!g||++vt%g||(o=Y,s=et,z=z||1);return V},ln=.3,k=44100,$=new(window.AudioContext||webkitAudioContext),be=(t,e,o,n=125)=>{let a,r,i,c,s,m,l,T,g,R,E,A,u,O,U=0,tt,y=[],et=[],ot=[],Y=0,V=0,v=1,nt={},p=44100/n*60>>2;for(;v;Y++)y=[v=T=E=u=0],o.map((z,vt)=>{for(l=e[z][Y]||[0,0,0],v|=!!e[z][Y],tt=u+(e[z][0].length-2-!T)*p,O=vt==o.length-1,r=2,c=u;r<l.length+O;T=++r){for(s=l[r],g=r==l.length+O-1&&O||R!=(l[0]||0)|s|0,i=0;i<p&&T;i++>p-99&&g?A+=(A<1)/99:0)m=(1-A)*y[U++]/2||0,et[c]=(et[c]||0)-m*V+m,ot[c]=(ot[c++]||0)+m*V+m;s&&(A=s%1,V=l[1]||0,(s|=0)&&(y=nt[[R=l[U=0]||0,s]]=nt[[R,s]]||(a=[...t[R]],a[2]=(a[2]||220)*2**((s-12)/12),s>0?fn(...a):[])))}u=tt});return[et,ot]};var St=(t=!1)=>{(t||$.state==="suspended")&&$.resume().catch()},_e=async t=>{let e=await pn(t),o=we(...e);o.loop=!0,$.resume()},pn=async t=>(await Xt(50),be(...t));var zt={},ke=!1,Se=()=>{gt.onkeydown=t=>{St(),ke=!0,zt[t.keyCode]=!0,t.preventDefault()},gt.onkeyup=t=>{ke=!1,dn(t.keyCode),t.preventDefault()},h.onmousedown=()=>{St()},h.ontouchstart=()=>{St()}},I=t=>zt[t],dn=t=>delete zt[t];var wn={mob:!1,health:1e3,walkSpeed:30,offset:{x:16,y:29},animations:{stand:[{image:57,time:.2},{image:58,time:.2},{image:59,time:.2},{image:58,time:.2},{image:57,time:.2},{image:60,time:.2}],walkH:[{image:57,time:.1},{image:61,time:.1},{image:62,time:.1},{image:61,time:.1}],walkV:[{image:68,time:.1},{image:69,time:.1},{image:68,time:.1},{image:70,time:.1}],jab:[{image:57,time:.05},{image:65,time:.1}],cross:[{image:65,time:.1},{image:66,time:.1},{image:67,time:.1},{image:66,time:.1}],kick:[{image:57,time:.05},{image:63,time:.05},{image:64,time:.1},{image:63,time:.1}],damage1:[{image:57,time:1}],damage2:[{image:57,time:1}],knockdown:[{image:57,time:1}],dead1:[{image:57,time:1}],dead2:[{image:57,time:1}]},damages:{65:10,67:20,64:30}},w,Pe=()=>{w=_t(wn)},Z=()=>w,He=()=>{w&&(w.health<=0||(w.controller.move.x=0,w.controller.move.y=0,w.controller.leg=!1,w.controller.hand=!1,(I(37)||I(65))&&(w.controller.move.x=-1),(I(39)||I(68))&&(w.controller.move.x=1),(I(38)||I(87))&&(w.controller.move.y=-1),(I(40)||I(83))&&(w.controller.move.y=1),I(90)&&(w.controller.leg=!0),I(88)&&(w.controller.hand=!0)))};var tr=1*(Math.exp(.5)-1);var Ae,ze=[];qt||bn();function bn(){Ae||(Ae=new AudioContext,!1)}async function Be(){let e=await(await fetch("r")).arrayBuffer(),o=new Uint8Array(e),n=0,a=o[n++]*4,r=o.slice(n,n+a);n+=a;let i=o[n++];for(;i--;){let s=o[n++],m=o[n++],l=s*m,T=o.slice(n,n+l);n+=l;let g=Nt();$t(g,s),Lt(g,m);let R=g.getImageData(0,0,s,m);for(let E=0;E<T.length;E++){let A=T[E]<<2;R.data.set(r.slice(A,A+4),E<<2)}g.putImageData(R,0,0),f.push(ht(g))}let c=o[n++];for(;c--;){let s=o[n++];ze.push(e.slice(n,n+s)),n+=s}}var De=[[[.6,0,100,,,.2,1,.5,,-10,,,,3,,,,10],[.7,0,110,,,.2,2,.1,,,,,,,,,,,.1,.4],[1.3,0,300,,,0,4,3,,,300,,,1,,,,.3,.2],[,0,,,.13,.7,2,.2,,,,,.04,.3,,.02,1,,.3,.1],[3,0,60,,,,3,.2,,,,.5,,.6,1,.05],[,0],[,0]],[[[,-.1,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,],[2,.1,,,,,1,,,,,,,,1,,,,,,,,1,,,,,,,,1,,,1,,,,,1,,,,,,,,1,,,,,,,,1,,,,,,,,1,,1,1],[1,.1,1,,13,,1,,13,,1,,13,,1,,13,,1,,13,,1,,13,,1,,13,,1,,13,,4,,16,,4,,16,,4,,16,,4,,16,,4,,16,,4,,16,,3,,15,,3,,15,,],[3,.3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]],[[,-.1,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,],[2,.1,1,,,,1,,,,,,,,1,,,,,,,,1,,,,,,,,1,,,1,,,,,1,,,,,,,,1,,,,,,,,1,,,,,,,,1,,1,1],[1,.1,1,,13,13,1,,13,13,1,,13,,1,,13,13,1,,13,13,1,,13,,1,,13,13,1,,13,13,4,,16,16,4,,16,16,4,,16,,4,,16,16,4,,16,16,4,,16,16,3,,15,15,3,,15,15],[3,.4,,,,,20,,,,,,23,,,,,,25,,,,,,27,,,,,,25,,,,27,,,,,,,,,,,,,,,,28,,27,,,,25,,,,27,,,,25,,]]],[0,0,1,1],,];var We=()=>{let n=Rn(400,150),a=En(400,95),r=X(),i=b(r);r.width=400,r.height=245,F(i,a,0,0),F(i,n,0,95);let c=ct(r),s=10,m=5;return{bounds:{x:s,y:95+m,w:400-s*2,h:150-m*2},back:{image:c},camera:{x:0,y:0}}},Rn=(t,e)=>{let o=Jt(t,e,[0,1,2,3],[3,2,1,1]),n=b(o),a=30;return n.fillStyle="black",n.fillRect(0,0,o.width,1),ut(n,0,0,o.width,a,1996488704,0),ut(n,0,o.height-a,o.width,a,0,1996488704),Oe(10,o),o},En=(t,e)=>{let o=Qt(t,e,4),n=b(o),a=[5,6,7],r=[2,1,1],i=50;for(let s=0;s<t;s+=i)for(let m=0;m<t;m+=16){let l=f[xt(a,r)];F(n,l,s,m)}Zt([8,i-13,0,8,i*3-13,0,8,i*6-13,0,9,i*2-17,0,9,i*5-30,0],n);let c=40;return ut(n,0,o.height-c,o.width,c,0,1996488704),Oe(10,o),o},Oe=(t,e)=>{let o=b(e),n=t/2,a=o.getImageData(0,0,e.width,e.height),r=a.data,i=0;for(;i<r.length;){let c=r[i],s=r[i+1],m=r[i+2];r[i]=c-n+t*D(),r[i+1]=s-n+t*D(),r[i+2]=m-n+t*D(),i+=4}o.putImageData(a,0,0)};var Ue=()=>{ce(We()),le(),Pe();let t=M(),e=Z();e.position.x=t.bounds.x+50,e.position.y=t.bounds.y+t.bounds.h/2};var Ge=()=>{let t=M(),e=Z();t.camera.x=e.position.x-_/2,t.camera.y=e.position.y-C/2};var lt=[],Gn=[4278190080,4294939392,4287898002,4289362242,4284354049,4290735454,4278215936,4278217323,4278261885],qn={mob:!0,health:100,walkSpeed:20,offset:{x:16,y:31},animations:{stand:[{image:72,time:.3},{image:73,time:.3},{image:72,time:.3},{image:74,time:.3},{image:75,time:.3},{image:74,time:.3}],walkH:[{image:72,time:.2},{image:76,time:.2},{image:72,time:.2},{image:77,time:.2}],walkV:[{image:72,time:.2},{image:81,time:.2},{image:72,time:.2},{image:82,time:.2}],jab:[{image:72,time:.2},{image:78,time:.2}],cross:[{image:78,time:.2},{image:79,time:.2},{image:80,time:.2},{image:79,time:.2}],kick:[{image:72,time:.2},{image:83,time:.2},{image:84,time:.2},{image:83,time:.2}],damage1:[{image:86,time:.5},{image:85,time:.3}],damage2:[{image:90,time:.5},{image:89,time:.3}],knockdown:[{image:85,time:.2},{image:86,time:.5},{image:87,time:1},{image:88,time:.3},{image:89,time:.2}],dead1:[{image:90,time:.2},{image:91,time:.2},{image:92,time:.2},{image:93,time:5}],dead2:[{image:85,time:.2},{image:86,time:.5},{image:87,time:1}]},damages:{78:5,80:10,84:20}},Gt=[],Qe=()=>{Gt.push(Ke([4278190080,4294939392,4281545523,4281545523,4288256409,4294939392,4278190131,4278190131,4278190080],"bob")),Gt.push(Ke([4278190080,4294939392,4285642965,4294939392,4294939392,4278190080,4286151563,4286151563,4278190080],"jack"))},Ke=(t,e)=>{let o=Vt(qn);o.walkSpeed=q(10,20);let n=o.animations;for(let a in n){let r=n[a];Nn(r,Gn,t,e)}return o},Nn=(t,e,o,n)=>{for(let a of t)a.image=$n(a.image,e,o,n)},Ut={},$n=(t,e,o,n)=>{let a=`${t}_${n}`;if(!Ut[a]){let r=yt(f[t]);te(r,e,o),Ut[a]=ct(r)}return Ut[a]},Je=t=>{let e=_t(Gt[t]);return lt.push(e),e};var Ln=t=>{let e=lt.indexOf(t);e!=-1&&lt.splice(e,1)},Ze=()=>{let t=Z();for(let e of lt)Vn(e,t)},Vn=(t,e)=>{if(x.indexOf(t)==-1&&Ln(t),t.health<=0)return;t.controller.move.x=0,t.controller.move.y=0,t.controller.leg=!1,t.controller.hand=!1,t.controller.cross=!1;let o=15;if(t.state==0||t.state==1){let n=W.subtract(e.position,t.position);if(W.length(n)>o)W.normalize(n),t.controller.move.x=n.x,t.controller.move.y=n.y;else{t.controller.move.x=0,t.controller.move.y=0;let r=D();r<.5?t.controller.hand=!0:r<.8?t.controller.cross=!0:t.controller.leg=!0}}},to=()=>{if(lt.length<2){let t=M(),e=dt(.5)?Je(0):Je(1);e.position.x=t.bounds.x+100+q(-40,40),e.position.y=t.bounds.y+t.bounds.h/2+q(-40,40)}};!1;var eo=()=>{ee(),ue(),He(),Ze(),de(),xe(),pe(),ie(),to(),Ge(),me(),ge(),ye(),requestAnimationFrame(eo)};async function Xn(){await Be(),_e(De),Se(),Qe(),Ue(),eo()}Xn();})();
//# sourceMappingURL=s.js.map
